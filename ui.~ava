import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JList;

/**
 *
 * Beschreibung
 *
 * @version 1.0 vom 01.06.2021
 * @author 
 */

public class ui extends JPanel {
  // Anfang Attribute
  private JList optionenwahl = new JList();
    private DefaultListModel jList1Model = new DefaultListModel();
    private JScrollPane jList1ScrollPane = new JScrollPane(optionenwahl);
  private JPanel jPanel1 = new JPanel(null, true);
  private JSeparator jSeparator1 = new JSeparator();
  private JLabel lSchuelerauswaehlen = new JLabel();
  private JTextField jTextField1 = new JTextField();
  private JLabel lSuchen = new JLabel();
  private JList schuelerwahl = new JList();
    private DefaultListModel jList2Model = new DefaultListModel();
    private JScrollPane jList2ScrollPane = new JScrollPane(schuelerwahl);
  
  private String currentAction;
  private String[] actions = {"Durchschn. Bewertung eines Schülers", "Selbsteinsch. eines Schülers", "Durchschn. Selbsteinschätzung der Schüler", "Bewertung eines Schülers", "Meine Bewertung", "Schüler sortieren nach Selbsteinschätzung", "Schüler sortieren nach durchschn. Bewertung"};
  // Ende Attribute
  
  public ui() { 
    // Frame-Initialisierung
    super();
    int frameWidth = 1000; 
    int frameHeight = 600;
    setSize(frameWidth, frameHeight);
    Dimension d = Toolkit.getDefaultToolkit().getScreenSize();
    int x = (d.width - getSize().width) / 2;
    int y = (d.height - getSize().height) / 2;
    setLocation(x, y);
    // Anfang Komponenten
    
    optionenwahl.setModel(jList1Model);
    jList1ScrollPane.setBounds(0, 50, 300, 550);
    optionenwahl.setListData(actions);
    optionenwahl.addListSelectionListener(new ListSelectionListener() {
            @Override
            public void valueChanged(ListSelectionEvent e) {
                if (!e.getValueIsAdjusting()) {
                   currentAction = String.valueOf(optionenwahl.getSelectedValue());
                   switch (optionenwahl.getSelectedIndex()) {
                     case 0: 
                       showSchuelerwahl(true);
                       break;
                     case 1: 
                       showSchuelerwahl(true);
                       break;
                     case 2: 
                       showSchuelerwahl(false);
                       break;
                     case 3: 
                       showSchuelerwahl(true);
                       break;
                     case 4: 
                       showSchuelerwahl(true);
                       break;
                     case 5: 
                       showSchuelerwahl(false);
                       break;
                     case 6: 
                       showSchuelerwahl(false);
                       break;
                     default: 
                       
                   } // end of switch 
                }
            }
        });
    this.add(jList1ScrollPane);
    
    jPanel1.setBounds(0, 0, 1000, 50);
    jPanel1.setOpaque(false);
    this.add(jPanel1);
    
    jSeparator1.setBounds(300, 50, 700, 2);
    this.add(jSeparator1);
    
    lSchuelerauswaehlen.setBounds(500, 51, 300, 86);
    lSchuelerauswaehlen.setText("Schüler auswählen");
    lSchuelerauswaehlen.setFont(new Font("Dialog", Font.BOLD, 30));
    lSchuelerauswaehlen.setVisible(true);
    this.add(lSchuelerauswaehlen);
    
    jTextField1.setBounds(608, 138, 150, 20);
    jTextField1.getDocument().addDocumentListener(new DocumentListener(){
        @Override
        public void insertUpdate(DocumentEvent e) {
            //System.out.println("insert");
            updateSchuelerListe();
        }
    
        @Override
        public void removeUpdate(DocumentEvent e) {
            //System.out.println("remove");
            updateSchuelerListe();
        }
    
        @Override
        public void changedUpdate(DocumentEvent e) {
            return;
        }
      });
    this.add(jTextField1);
    
    lSuchen.setBounds(538, 138, 63, 20);
    lSuchen.setText("Suchen:");
    this.add(lSuchen);
    
    schuelerwahl.setModel(jList2Model);
    jList2ScrollPane.setBounds(307, 163, 677, 399);
    schuelerwahl.addListSelectionListener(new ListSelectionListener){
      @Override
      public void valueChanged(ListSelectionEvent e) {
        if (!e.getValueIsAdjusting()) {
          switch (currentAction) {
            case actions[0]: 
              // show durchschn. bewertung eines schuelers
              break;
            case actions[1]: 
              // show selbsteinsch. eines schuelers
              break;
            case actions[2]: 
              // durchschn. selbsteinsch. eines schuelers
              break;
            case actions[3]: 
              // bewertung eines schuelers
              break;
            case actions[4]: 
              // meine bewertung
              break;
            case actions[5]: 
              // show schueler sort. nach selbsteinsch.
              break;
            case actions[6]: 
              // show schueler sort. nach durchschn. bewertung
              break;
            default: 
              
          } // end of switch
        }
      }
    });
    this.add(jList2ScrollPane);
    
    lSchuelerauswaehlen.setEnabled(true);
    // Ende Komponenten
    
    setVisible(true);
    showSchuelerwahl(false);
  } // end of public ui
  
  // Anfang Methoden
  
  public static void main(String[] args) {
    new ui();
  } // end of main
  
  public void showSchuelerwahl(boolean visible){
    lSchuelerauswaehlen.setVisible(visible);
    lSuchen.setVisible(visible);
    schuelerwahl.setVisible(visible);
    jTextField1.setVisible(visible);
    jList2ScrollPane.setVisible(visible);
    if(!visible)
       return;
    
    // todo : get from server
    String[] tempSchueler = {"Hans Peter Wurst", "Peter Lustig", "Peter Traurig", "Alan Turing", "Albert Einstein", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig"};
    schuelerwahl.setListData(tempSchueler);
  }
  
  private String[] getElementsFromList(JList list){
    int size = list.getModel().getSize();
    String[] res = new String[size];
    for(int i = 0; i < size; i++){
      res[i] = String.valueOf(list.getModel().getElementAt(i));
    }
    return res;
  }
  
  private void updateSchuelerListe(){
    // todo : get from server
    String[] elements = {"Hans Peter Wurst", "Peter Lustig", "Peter Traurig", "Alan Turing", "Albert Einstein", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig", "Peter Lustig"};
    List<String> newElements = new List<String>();
    String search = jTextField1.getText().toLowerCase();
    int elementCount = 0;
    for(String a : elements){
      if(a.toLowerCase().startsWith(search)){
        newElements.append(a);
        elementCount++;
      }
    }
    String[] res = new String[elementCount];
    newElements.toFirst();
    for(int i = 0; i < elementCount; i++){
      res[i] = newElements.getContent() + "";
      newElements.next();
    }
    schuelerwahl.setListData(res);
  }
  // Ende Methoden
} // end of class ui

